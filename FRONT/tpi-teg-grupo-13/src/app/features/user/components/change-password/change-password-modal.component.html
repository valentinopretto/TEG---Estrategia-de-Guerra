<div *ngIf="isVisible" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm">
  <div class="bg-gradient-to-br from-amber-50 to-amber-100 rounded-2xl p-8 w-full max-w-md mx-4 shadow-2xl border border-amber-100">

    <!-- Header -->
    <div class="text-center mb-8">
      <h2 class="text-2xl font-bold text-amber-900 tracking-wide uppercase">
        Modificar Contraseña
      </h2>
    </div>

    <!-- Form -->
    <form (ngSubmit)="onSubmit()" #passwordForm="ngForm">

      <!-- Contraseña Actual -->
      <div class="mb-6">
        <label class="block text-amber-800 font-semibold mb-2 uppercase tracking-wide text-sm">
          Contraseña Actual:
        </label>
        <input
          type="password"
          [(ngModel)]="passwordData.currentPassword"
          name="currentPassword"
          required
          placeholder="Ingresa tu contraseña actual"
          class="w-full py-3 px-4 bg-white/10 border-2 border-amber-200 rounded-lg text-amber-900 placeholder-amber-700 focus:outline-none focus:border-amber-200 focus:bg-white transition-all duration-300"
        />
      </div>

      <!-- Nueva Contraseña -->
      <div class="mb-6">
        <label class="block text-amber-800 font-semibold mb-2 uppercase tracking-wide text-sm">
          Nueva Contraseña:
        </label>
        <input
          type="password"
          [(ngModel)]="passwordData.newPassword"
          name="newPassword"
          required
          minlength="6"
          placeholder="Ingresa tu nueva contraseña"
          class="w-full py-3 px-4 bg-white/10 border-2 border-amber-200 rounded-lg text-amber-900 placeholder-amber-700 focus:outline-none focus:border-amber-500 focus:bg-white transition-all duration-300"
        />
      </div>

      <!-- Confirmar Nueva Contraseña -->
      <div class="mb-8">
        <label class="block text-amber-800 font-semibold mb-2 uppercase tracking-wide text-sm">
          Confirmar Nueva Contraseña:
        </label>
        <input
          type="password"
          [(ngModel)]="passwordData.confirmPassword"
          name="confirmPassword"
          required
          placeholder="Confirma tu nueva contraseña"
          class="w-full py-3 px-4 bg-white/10 border-2 border-amber-200 rounded-lg text-amber-900 placeholder-amber-700  focus:outline-none focus:border-amber-500 focus:bg-white transition-all duration-300"
          [class.border-red-400]="passwordData.newPassword !== passwordData.confirmPassword && passwordData.confirmPassword !== ''"
        />
        <p *ngIf="passwordData.newPassword !== passwordData.confirmPassword && passwordData.confirmPassword !== ''"
           class="text-red-500 text-sm mt-1">
          Las contraseñas no coinciden
        </p>
      </div>

      <!-- Buttons -->
      <div class="flex gap-4">
        <button
          type="button"
          (click)="closeModal()"
          [disabled]="isChanging"
          class="flex-1 py-3 px-6 bg-red-400 hover:bg-gray-500 disabled:bg-gray-300 text-white rounded-xl font-bold uppercase tracking-wide transition-all duration-300 hover:shadow-lg">
          Cancelar
        </button>

        <button
          type="submit"
          [disabled]="!passwordForm.valid || passwordData.newPassword !== passwordData.confirmPassword || isChanging"
          class="flex-1 py-3 px-6 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 disabled:from-gray-400 disabled:to-gray-500 text-white rounded-xl font-bold uppercase tracking-wide transition-all duration-300 hover:shadow-lg hover:shadow-green-600/40">
          {{ isChanging ? 'Modificando...' : 'Modificar' }}
        </button>
      </div>
    </form>
  </div>
</div>
